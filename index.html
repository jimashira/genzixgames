<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Genzix Infinite Quiz</title>
<style>
body {
  font-family: 'Comic Sans MS', cursive, sans-serif;
  margin:0;
  padding:0;
  height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  background:
    linear-gradient(rgba(255,182,193,0.4), rgba(255,105,180,0.4)),
    url("https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQVPbFmLKWwahIOHIT2liS7UpMIg5zA-vCIRg&s") no-repeat center center fixed;
  background-size: cover;
  color:#fff;
}

h1 {
  text-align:center;
  font-size:2.5em;
  color:#fff0f6;
  text-shadow:2px 2px #ff5bbd;
  margin-bottom:20px;
}

#game, #intro, #levelEnd {
  background: rgba(255,255,255,0.85);
  border-radius:25px;
  padding:30px;
  max-width:500px;
  box-shadow:0 8px 20px rgba(0,0,0,0.3);
  color:#ff4fa1;
  text-align:center;
}

p {
  font-size:1.3em;
  font-weight:bold;
  margin-bottom:15px;
}

input {
  padding:12px;
  width:250px;
  font-size:16px;
  border-radius:25px;
  border:2px solid #ff8bd4;
  outline:none;
  text-align:center;
}

button {
  padding:12px 25px;
  margin:10px;
  font-size:16px;
  cursor:pointer;
  border:none;
  border-radius:25px;
  background: linear-gradient(45deg,#ff8bd4,#ff5bbd);
  color:white;
  font-weight:bold;
  transition:0.3s;
}

button:hover {
  background: linear-gradient(45deg,#ff5bbd,#ff8bd4);
  transform:scale(1.05);
}

#timer {
  font-size:18px;
  margin:10px 0;
  color:red;
  font-weight:bold;
}

#result {
  font-size:20px;
  margin-top:10px;
  font-weight:bold;
}

#flashcard {
  position: fixed;
  top: 40%;
  left: 50%;
  transform: translate(-50%, -50%);
  background: #ffb6c1;
  color: #fff;
  padding: 30px 50px;
  border-radius: 25px;
  font-size: 2em;
  text-align: center;
  display: none;
  z-index: 1000;
}

#popup {
  position: fixed;
  top:0;
  left:0;
  width:100%;
  height:100%;
  background: rgba(0,0,0,0.6);
  display:flex;
  justify-content:center;
  align-items:center;
  opacity:0;
  pointer-events:none;
  transition:0.3s;
  z-index:999;
}

#popup.show {
  opacity:1;
  pointer-events:auto;
}

#popupContent {
  background: #fff;
  border-radius: 20px;
  padding: 20px;
  text-align: center;
  max-width: 300px;
  animation: popin 0.3s ease;
}

#popupContent img {
  width: 180px;
  border-radius: 15px;
  box-shadow: 0 6px 15px rgba(0,0,0,0.4);
}

#correctAnswer {
  font-size:16px;
  color:#ff4fa1;
  margin-top:10px;
}

@keyframes popin {
  0% { transform: scale(0.7); opacity:0; }
  100% { transform: scale(1); opacity:1; }
}
</style>
</head>
<body>

<!-- Intro Screen -->
<div id="intro">
  <h1>Are you ready, Soulz?</h1>
  <button onclick="introYes()">Yes</button>
  <button onclick="introNo()">No</button> <br>
  <p id="noText" style="display:none;">Sino nag sabing pwede mag no?</p> <br>
  <button id="startBtn" style="display:none;" onclick="startGame()">Start Game</button>
</div>

<!-- Game Screen -->
<div id="game" style="display:none;">
  <p id="lyricPrompt"></p>
  <input type="text" id="answer" placeholder="Type your answer...">
  <br>
  <button onclick="checkAnswer()">Submit</button>
  <div id="timer"></div>
  <div id="result"></div>
</div>

<!-- Level End Screen -->
<div id="levelEnd" style="display:none;">
  <p id="levelEndMsg"></p>
  <button onclick="playNextLevel()">Play Next Level</button>
</div>

<div id="flashcard"></div>

<!-- Popup -->
<div id="popup">
  <div id="popupContent">
    <img id="popupImg" src="" alt="Result">
    <div id="correctAnswer"></div>
    <br>
    <button onclick="closePopupAndNext()">Next</button>
  </div>
</div>

<script>
const allQuestions = {
  easy:[
    {q:"Di na nga nag ____ kung ito ay isang pagibig", a:["tataka"]},
    {q:"Like dub dub oh dub ____", a:["dub"]},
    {q:"Unang kita pa lang kuhang ____ mo na", a:["kuha"]},
    {q:"Your face captivates me like a pretty ____", a:["melody"]},
    {q:"La, wala pang 5 ____ nang nahulog sayo", a:["seconds"]},
    {q:"Sino pinaka corny?", a:["leo","Leo"]},
    {q:"Pinakajudgemental sa Genzix?", a:["jayu","Jayu"]},
    {q:"Name ng teddy bear ni Kiyo?", a:["sky","Sky"]}
  ],
  medium:[
    {q:"Medium lyric: 'Wala, wala pang 5 ____ nang nahulog sayo'", a:["seconds"]},
    {q:"Medium lyric: 'Pulutin mo ang ____ ko, malinis ang hangarin ko'", a:["puso"]},
    {q:"Medium lyric: 'hindi ko ____'", a:["sinasadya"]},
    {q:"Medium lyric: 'nahulog ko ang ____ ko at sa harapan mo pa'", a:["puso"]},
    {q:"Sino ang may 40+ perfume?", a:["jayu","Jayu"]},
    {q:"Sino laging late sa Genzix?", a:["leo","Leo"]}
  ],
  hard:[
    {q:"Hard lyric: 'Mula nang masilayan ka di na ____ sa aking isip'", a:["mawala"]},
    {q:"Hard lyric: 'Di na nga ____ kung ito ay isang pagibig'", a:["tataka"]},
    {q:"Hard lyric: 'Kumakabog kabog itong aking ____'", a:["dibdib"]},
    {q:"Sino nangungupit kay Sir Nadz?", a:["cantonz","kiyo","jayu","kupitz duo"]},
    {q:"Sino nakaubos ng tortang talong?", a:["jayu","Jayu"]},
    {q:"Mahal ni Leo ang Soulz pero mas mahal niya si?", a:["jayu","Jayu"]}
  ]
};

const goodPhotos = [
  "https://pbs.twimg.com/media/G0AVV1rbkAInkHb?format=jpg&name=small",
  "https://pbs.twimg.com/media/GzsCPaQbcAApS_w?format=jpg&name=large"
];

const memePhotos = [
  "https://pbs.twimg.com/media/G0FydTqb0AASzxN?format=png&name=small",
  "https://pbs.twimg.com/media/G0FyivpbgAA_C5m?format=png&name=small"
];

let currentQuestion, timer;
let usedQuestions = {easy:[], medium:[], hard:[]};
let missedQuestions = [];
let levels = ["easy","medium","hard"];
let levelIndex = 0;
let difficulty = levels[levelIndex];

// Intro functions
function introYes(){
  document.getElementById("startBtn").style.display="inline-block";
  document.getElementById("noText").style.display="none";
}
function introNo(){
  document.getElementById("noText").style.display="block";
  document.getElementById("startBtn").style.display="inline-block";
}
function startGame(){
  document.getElementById("intro").style.display="none";
  document.getElementById("game").style.display="block";
  nextQuestion();
}

// Timer function
function getTimeLimit(){
  if(difficulty==="easy") return 20;
  if(difficulty==="medium") return 15;
  return 12;
}

function startTimer(){
  clearInterval(timer);
  let timeLeft = getTimeLimit();
  document.getElementById("timer").textContent = "‚è≥ " + timeLeft + "s left";
  timer = setInterval(() => {
    timeLeft--;
    document.getElementById("timer").textContent = "‚è≥ " + timeLeft + "s left";
    if(timeLeft <=0){
      clearInterval(timer);
      showResult(false,true);
    }
  },1000);
}

// Question flow
function nextQuestion(){
  document.getElementById("result").textContent="";
  document.getElementById("answer").value="";
  
  let available = allQuestions[difficulty].filter((q,i)=>!usedQuestions[difficulty].includes(i));
  if(available.length===0){
    // Show level end message
    document.getElementById("game").style.display="none";
    document.getElementById("levelEndMsg").textContent = "Are you a new Soulz? Use #FindingSOULZ on X to find more Soulz to interact with!";
    document.getElementById("levelEnd").style.display="block";
    return;
  }
  
  let randIndex = Math.floor(Math.random()*available.length);
  let qIndex = allQuestions[difficulty].indexOf(available[randIndex]);
  currentQuestion = allQuestions[difficulty][qIndex];
  usedQuestions[difficulty].push(qIndex);
  
  document.getElementById("lyricPrompt").textContent=currentQuestion.q;
  startTimer();
}

function playNextLevel(){
  levelIndex++;
  if(levelIndex >= levels.length){
    document.getElementById("levelEndMsg").textContent = "üéâ Game Finished! üéâ";
    return;
  }
  difficulty = levels[levelIndex];
  usedQuestions[difficulty] = [];
  document.getElementById("levelEnd").style.display="none";
  document.getElementById("game").style.display="block";
  showFlashcard("<"+capitalizeFirstLetter(difficulty)+">");
  nextQuestion();
}

// Answer checking
function checkAnswer(){
  clearInterval(timer);
  let userAns = document.getElementById("answer").value.trim().toLowerCase();
  let correctAns = currentQuestion.a.map(a=>a.toLowerCase());
  showResult(correctAns.includes(userAns),false);
}

// Show result popup
function showResult(correct,timeout){
  let imgSrc, msg, correctText;
  if(correct){
    msg="üíñ Correct!";
    imgSrc = goodPhotos[Math.floor(Math.random()*goodPhotos.length)];
    correctText = "";
  } else {
    correctText = "Correct Answer: " + currentQuestion.a[0];
    msg = timeout ? "‚è∞ Time‚Äôs up!" : "‚ùå Wrong!";
    imgSrc = memePhotos[Math.floor(Math.random()*memePhotos.length)];
    missedQuestions.push(currentQuestion);
  }
  document.getElementById("result").textContent = msg;
  document.getElementById("popupImg").src = imgSrc;
  document.getElementById("correctAnswer").textContent = correctText;
  document.getElementById("popup").classList.add("show");
}

function closePopupAndNext(){
  document.getElementById("popup").classList.remove("show");
  nextQuestion();
}

function showFlashcard(text){
  let fc = document.getElementById("flashcard");
  fc.textContent=text;
  fc.style.display="block";
  setTimeout(()=>{fc.style.display="none";},1500);
}

function capitalizeFirstLetter(str){
  return str.charAt(0).toUpperCase() + str.slice(1);
}
</script>

</body>
</html>
